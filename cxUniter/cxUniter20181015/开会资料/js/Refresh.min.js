function PushRefresh(a,c){this.zconf={backSite:-42,swipeDist:42,refreshTime:2000,swipeAngle:70,isStopDown:false,isAuto:true,pushDownTxt:"下拉刷新",releaseTxt:"释放刷新",pushDownLoadingTxt:"正在刷新",scroll:null};this.zconf.onRefreshStart=function(){};this.zconf.onRefreshEnd=function(){};this.refreshId=document.querySelector(a);this.zconf.site={startX:0,startY:0,endX:0,endY:0,moveX:0,moveY:0,pushLen:0};for(v in this.zconf){for(b in c){if(v==b){this.zconf[v]=c[b]}}}this.createRefresh(this.zconf);this.pushUpLoading=function(){}}PushRefresh.prototype.createRefresh=function(e){var f=this;var a=e.scroll?document.querySelector(e.scroll):null;var h=a||window;var i=a?a.scrollTop:(document.documentElement.scrollTop||document.body.scrollTop);var c=false;var g=document.createElement("div");g.className="zrefresh",g.id="pushDown";var d=document.createElement("p");d.className="refreshIcon",d.id="pushState";var j=document.createElement("p");j.className="refresh_text",j.id="pushTxt";g.appendChild(d);g.appendChild(j);j.innerHTML=e.pushDownTxt;f.refreshId.parentNode.insertBefore(g,f.refreshId);this.touchS=function(k){g.classList.remove("zanimate");f.refreshId.classList.remove("zanimate");e.site.startX=k.targetTouches[0].pageX;e.site.startY=k.targetTouches[0].pageY};this.touchM=function(m){e.site.endX=m.targetTouches[0].pageX;e.site.endY=m.targetTouches[0].pageY;e.site.moveX=e.site.endX-e.site.startX,e.site.moveY=e.site.endY-e.site.startY;if(e.site.moveY<=0||e.site.startY==0){c=false;g.style.webkitTransform="translate3d(0, 0, 0)";f.refreshId.style.webkitTransform="translate3d(0, 0, 0)";return false}if(e.site.moveY>2&&!e.isStopDown){m.preventDefault();var l=0,k=0,o=0,n=0;l=Math.abs(e.site.moveY);k=Math.abs(e.site.moveX);o=Math.sqrt(Math.pow(l,2)+Math.pow(k,2));n=Math.floor(180*Math.asin(k/o)/Math.PI);if(n<e.swipeAngle){e.site.pushLen=e.site.moveY*0.7;g.style.webkitTransform="translate3d(0, "+e.site.pushLen+"px, 0)";f.refreshId.style.webkitTransform="translate3d(0, "+e.site.pushLen+"px, 0)";if(e.site.pushLen>e.swipeDist){j.innerHTML=e.releaseTxt;d.classList.add("refreshIcon180");c=true}else{j.innerHTML=e.pushDownTxt;d.classList.remove("refreshIcon180")}}}};this.pushDownBack=function(){g.style.webkitTransform="translate3d(0, 0, 0)";f.refreshId.style.webkitTransform="translate3d(0, 0, 0)";j.innerHTML=e.pushDownTxt;d.classList.remove("refreshing");d.classList.add("refreshIcon");f.bindPushDown();e.onRefreshEnd(f)};this.touchE=function(){f.unbindPushDown();if(c&&e.site.pushLen>e.swipeDist){g.classList.add("zanimate");f.refreshId.classList.add("zanimate");g.style.webkitTransform="translate3d(0, "+e.swipeDist+"px, 0)";f.refreshId.style.webkitTransform="translate3d(0, "+e.swipeDist+"px, 0)";j.innerHTML=e.pushDownLoadingTxt;d.classList.remove("refreshIcon");d.classList.add("refreshing");e.onRefreshStart(f);c=false}else{g.classList.add("zanimate");f.refreshId.classList.add("zanimate");g.style.webkitTransform="translate3d(0, 0, 0)";f.refreshId.style.webkitTransform="translate3d(0, 0, 0)";j.innerHTML=e.pushDownTxt;d.classList.remove("refreshing");d.classList.add("refreshIcon");f.bindPushDown();return false}e.site.pushLen=e.backSite;if(e.isAuto){setTimeout(function(){f.pushDownBack()},e.refreshTime)}};this.bindPushDown=function(){f.refreshId.addEventListener("touchstart",f.touchS,false);f.refreshId.addEventListener("touchmove",f.touchM,false);f.refreshId.addEventListener("touchend",f.touchE,false);if(f.refreshId.querySelectorAll("iframe")){for(var k=0;k<f.refreshId.querySelectorAll("iframe").length;k++){f.refreshId.querySelectorAll("iframe")[k].contentWindow.addEventListener("touchstart",f.touchS,false);f.refreshId.querySelectorAll("iframe")[k].contentWindow.addEventListener("touchmove",f.touchM,false);f.refreshId.querySelectorAll("iframe")[k].contentWindow.addEventListener("touchend",f.touchE,false)}}};this.unbindPushDown=function(){f.refreshId.removeEventListener("touchstart",f.touchS);f.refreshId.removeEventListener("touchmove",f.touchM);f.refreshId.removeEventListener("touchend",f.touchE);if(f.refreshId.querySelectorAll("iframe")){for(var k=0;k<f.refreshId.querySelectorAll("iframe").length;k++){f.refreshId.querySelectorAll("iframe")[k].contentWindow.removeEventListener("touchstart",f.touchS,false);f.refreshId.querySelectorAll("iframe")[k].contentWindow.removeEventListener("touchmove",f.touchM,false);f.refreshId.querySelectorAll("iframe")[k].contentWindow.removeEventListener("touchend",f.touchE,false)}}};if(!(e.sTop>0)&&!e.isStopDown){this.bindPushDown()}else{this.unbindPushDown()}h.addEventListener("scroll",function(){i=a?a.scrollTop:(document.documentElement.scrollTop||document.body.scrollTop);if(i<=0&&!e.isStopDown){f.bindPushDown()}else{f.unbindPushDown()}},false)};PushRefresh.prototype.ChangeState=function(){if(this.zconf.isAuto){alert("若将isAuto设置自动消失状态（true）,不必执行方法ChangeState()")}else{this.pushDownBack()}};PushRefresh.prototype.ResetState=function(a){this.zconf.isStopDown=a};function PushUp(c,a){this.zconf={isStopUp:false,loadingTxt:"正在加载中...",warnningTxt:"已经到底啦~(>_<)~~",isData:true,scroll:null};this.zconf.Dataloading=function(){};this.PushUpId=document.querySelector(c);for(v in this.zconf){for(b in a){if(v==b){this.zconf[v]=a[b]}}}this.eleScroll=this.zconf.scroll?document.querySelector(this.zconf.scroll):null;this.sTop=this.eleScroll?this.eleScroll.scrollTop:(document.documentElement.scrollTop||document.body.scrollTop);this.zheight=this.zconf.scroll?parseInt(document.querySelector(this.zconf.scroll).clientHeight):document.documentElement.clientHeight;this.refreshUp=document.createElement("div");this.refreshUp.className="zrefresh",this.refreshUp.id="refreshUp";this.refreshState=document.createElement("p");this.refreshState.className="refreshing",this.refreshState.id="refreshState";this.refreshTxt=document.createElement("p");this.refreshTxt.className="refresh_text",this.refreshTxt.id="refreshTxt";this.refreshUp.appendChild(this.refreshState);this.refreshUp.appendChild(this.refreshTxt);this.refreshTxt.innerHTML=this.zconf.loadingTxt;this.pushUpInit(this.zconf)}PushUp.prototype.pushUpInit=function(d){var c=this;var a=this.eleScroll||window;a.onscroll=function(){c.sTop=c.eleScroll?c.eleScroll.scrollTop:(document.documentElement.scrollTop||document.body.scrollTop);var f=c.sTop+c.zheight;var e=c.eleScroll?c.eleScroll.scrollHeight:(document.documentElement.scrollHeight||document.body.scrollHeight);if((f==e||f>=e-1)&&!d.isStopUp){d.isStopUp=true;c.PushUpId.parentNode.appendChild(c.refreshUp,c.PushUpId);d.Dataloading(c);c.refreshState.classList.add("zrunning")}else{}}};PushUp.prototype.ChangeState=function(a){if(document.querySelector("#refreshUp")){this.isData=a}else{return}if(this.isData){document.querySelector("#refreshUp").remove();this.zconf.isStopUp=false}else{document.querySelector("#refreshTxt").innerText=this.zconf.warnningTxt;document.querySelector("#refreshState").style.display="none"}};PushUp.prototype.ResetState=function(a){this.zconf.isStopUp=a;if(document.querySelector("#refreshTxt")&&document.querySelector("#refreshTxt").innerText==this.zconf.warnningTxt){document.querySelector("#refreshUp").remove()}};