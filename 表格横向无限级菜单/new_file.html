<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>横向无限级菜单</title>
	</head>
	<body>
		<script src="jquery-1.9.0.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="jquery.nicescroll.min.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			.zmenu {}
			.zmenu-theader { position: relative; margin-right: 12px;}
			.zmenu-tr { position: absolute; bottom: -34px; display: table; width: 100%; border-left: 1px #ccc solid; border-top: 1px #ccc solid;}
			.zmenu-th { display: table-cell; border-right: 1px #ccc solid; border-bottom: 1px #ccc solid; background: #f2f2f2; text-align: center; font-size: 14px; color: #666;}
			.zmenu-tbody { height: 600px; padding-top: 33px; padding-right: 12px; overflow: hidden; overflow-y: auto;}
			.zmenu-list { display: table; width: 100%; border-left: 1px #ccc solid;}
			.zmenu-leve { display: table-cell; border-right: 1px #ccc solid; border-bottom: 1px #ccc solid; text-align: center; font-size: 14px; color: #666;}
			.zmenu-minWidth { display: inline-block; width: 200px; min-height: 34px; line-height: 34px;}
			.zmenu-item {display: table; width: 100%;}
			.zmenu-sub {display: table-cell;}
			.zmenu-leve {display: table-cell; vertical-align: middle;}
		</style>
		<div class="zmenu">
			<div class="zmenu-theader">
				<div class="zmenu-tr" id="zmenu-title">
					<div class="zmenu-th"><span class="zmenu-minWidth">能力点</span></div>
					<div class="zmenu-th"><span class="zmenu-minWidth">子能力点</span></div>
					<div class="zmenu-th"><span class="zmenu-minWidth">课程</span></div>
					<div class="zmenu-th"><span class="zmenu-minWidth">课程</span></div>
					<!--<div class="zmenu-th"><span class="zmenu-minWidth">课程</span></div>-->
				</div>
			</div>
			<div class="zmenu-tbody" id="boxscroll">
				<div class="zmenu-list">
					<div class="zmenu-item">
						<div class="zmenu-leve">
							<span class="zmenu-minWidth">一级菜单<br />（能力点描述内容能力点描述内容能力点描述内容能力点描述内容能力点描述内容能力点描述内容）</span>
						</div>
						<div class="zmenu-sub">
							<div class="zmenu-item">
								<div class="zmenu-leve">
									<span class="zmenu-minWidth">二级菜单<br />（能力点描述内容）</span>
								</div>
								<div class="zmenu-sub">
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单<br />（能力点描述内容能力点描述描述内容能力点描述内容能力点描述描述内容能力点描述内容能力点描述描述内容）</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="zmenu-item">
								<div class="zmenu-leve">
									<span class="zmenu-minWidth">二级菜单</span>
								</div>
								<div class="zmenu-sub">
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
												<!--<div class="zmenu-sub">
													<div class="zmenu-item">
														<div class="zmenu-leve">
															<span class="zmenu-minWidth">五级菜单</span>
														</div>
													</div>
												</div>-->
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
												<!--<div class="zmenu-sub">
													<div class="zmenu-item">
														<div class="zmenu-leve">
															<span class="zmenu-minWidth">五级菜单</span>
														</div>
													</div>
												</div>-->
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
												<!--<div class="zmenu-sub">
													<div class="zmenu-item">
														<div class="zmenu-leve">
															<span class="zmenu-minWidth">五级菜单</span>
														</div>
													</div>
												</div>-->
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="zmenu-item">
						<div class="zmenu-leve">
							<span class="zmenu-minWidth">一级菜单<br />（能力点描述内容能力点描述内容能力点描述内容能力点描述内容能力点描述内容能力点描述内容）</span>
						</div>
						<div class="zmenu-sub">
							<div class="zmenu-item">
								<div class="zmenu-leve">
									<span class="zmenu-minWidth">二级菜单<br />（能力点描述内容）</span>
								</div>
								<div class="zmenu-sub">
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单<br />（能力点描述内容能力点描述描述内容能力点描述内容能力点描述描述内容能力点描述内容能力点描述描述内容）</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="zmenu-item">
								<div class="zmenu-leve">
									<span class="zmenu-minWidth">二级菜单</span>
								</div>
								<div class="zmenu-sub">
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
									<div class="zmenu-item">
										<div class="zmenu-leve">
											<span class="zmenu-minWidth">三级菜单</span>
										</div>
										<div class="zmenu-sub">
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
											<div class="zmenu-item">
												<div class="zmenu-leve">
													<span class="zmenu-minWidth">四级菜单</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			// 设置最大列宽
			function setTdWidth () {
				var th_len  = $("#zmenu-title").children() 
				var boxW = $('#boxscroll').width()
				var maxW= (boxW-120)/th_len
				maxW = maxW > 200 ? maxW : 200
				$('.zmenu-minWidth').width(maxW)
				
			}
			$(window).resize(setTdWidth)
			
			$("#boxscroll").niceScroll({touchbehavior:false,cursorcolor:"#999",cursorborder:"0px solid #222",cursorborderradius:"0px",cursoropacitymax:0.7,cursorwidth:8,background:"#d1d1d1",autohidemode:false});
			
			// 异步更新数据时，需要再次调用
			function upDate () {
				setTdWidth()
				$(".zmenu-sub").each(function () {
					var item = $(this).children('.zmenu-item')
					var len = item.length
					var itemH = $(this).height()
					item.height(itemH/len + 1)
				})
				$("#boxscroll").getNiceScroll().resize();
			}
			
			upDate()
		</script>
	</body>
</html>
